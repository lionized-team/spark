# Требования к системе

## Архитектурные принципы

1. Каждый сервис выполняет отдельную бизнес-функцию, взаимодействие через очереди сообщений (Kafka) и REST/gRPC API

## Основные сервисы
### Event Ingest Service - Сервис приёма событий
1. Принимает внешние REST/gRPC-запросы с пользовательскими событиями (логин, клик, заполнение формы и т.д.)
2. Верифицирует данные/JSON-схему
3. Пишет "сырые" события в Kafka-топик
4. Может сохранять резервную копию в PostgreSQL
5. Можно добавить валидацию данных, throttle/ratelimiting

### Event Persistence Service - Сервис долговременного хранения

Event Persistence Service - Kafka consumer.
Получает события из Kafka, сериализует и складывает в PostgreSQL.

### Event Aggregation/Analytics Service - Сервис аналитики и агрегаций

Event Aggregation/Analytics Service - Kafka consumer.
Получает события и обновляет агрегаты.
Может использовать Redis.
Выгружает агрегированные результаты либо в отдельную БД, либо тоже в PostgreSQL.

###  API Gateway / Reporting Service

Reporting Service - REST (или gRPC) API для внешних клиентов.
Получение агрегированных данных, выгрузка сырых событий, фильтрация по user_id, времени, типу события.
Можно реализовать простую авторизацию (JWT/Bearer Token) на этот сервис.

### Auth Service - Сервис аутентификации и авторизации
Управление пользователями, токенами, правами доступа к событиям и аналитике.
регистрации, логины, роли и права
